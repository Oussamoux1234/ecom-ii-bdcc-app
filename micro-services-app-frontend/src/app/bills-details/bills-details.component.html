<!-- Loading State -->
<div class="spinner-container" *ngIf="!billDetails">
    <div class="spinner"></div>
</div>

<div *ngIf="billDetails">
    <!-- Page Header -->
    <div class="page-header">
        <div>
            <h2>Invoice #{{billId}}</h2>
            <p class="page-subtitle">{{billDetails.billingDate | date:'fullDate'}}</p>
        </div>
        <a routerLink="/bills" class="btn btn-outline-secondary">
            ‚Üê Back to Bills
        </a>
    </div>

    <!-- Customer Information Card -->
    <div class="card mb-6" style="background: #fff;">
        <div class="card-header" style="background: #f8fafc; color: #1e293b; font-weight: 600;">
            <i class="bi bi-person" style="color: #64748b;"></i>
            Customer Information
        </div>
        <div class="card-body" style="background: #fff;">
            <div class="customer-info">
                <div class="customer-info-item" style="background: #f1f5f9;">
                    <div class="customer-info-label" style="color: #64748b;">Customer ID</div>
                    <div class="customer-info-value" style="color: #0f172a; font-weight: 600;">
                        #{{billDetails.customer?.id}}</div>
                </div>
                <div class="customer-info-item" style="background: #f1f5f9;">
                    <div class="customer-info-label" style="color: #64748b;">Name</div>
                    <div class="customer-info-value" style="color: #0f172a; font-weight: 600;">
                        {{billDetails.customer?.name}}</div>
                </div>
                <div class="customer-info-item" style="background: #f1f5f9;">
                    <div class="customer-info-label" style="color: #64748b;">Email</div>
                    <div class="customer-info-value" style="color: #0f172a; font-weight: 600;">
                        {{billDetails.customer?.email}}</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Product Items Table -->
    <div class="card" style="background: #fff;">
        <div class="card-header" style="background: #f8fafc; color: #1e293b; font-weight: 600;">
            <i class="bi bi-box" style="color: #64748b;"></i>
            Line Items
        </div>
        <div style="overflow-x: auto;">
            <table class="table" style="background: #fff;">
                <thead style="background: #f8fafc;">
                    <tr>
                        <th style="color: #64748b; font-weight: 600;">Product</th>
                        <th style="color: #64748b; font-weight: 600;">Unit Price</th>
                        <th style="color: #64748b; font-weight: 600;">Quantity</th>
                        <th style="color: #64748b; font-weight: 600; text-align: right;">Amount</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let pi of billDetails.productItems" style="background: #fff;">
                        <td style="color: #1e293b;">
                            <div>
                                <strong style="color: #0f172a;">{{pi.product?.name || 'Product'}}</strong>
                                <div style="color: #94a3b8; font-size: 0.75rem;">ID: {{pi.productId | slice:0:8}}...
                                </div>
                            </div>
                        </td>
                        <td>
                            <span style="color: #0f172a; font-weight: 600;">
                                ${{pi.unitPrice | number:'1.2-2'}}
                            </span>
                        </td>
                        <td>
                            <span
                                style="background: #e2e8f0; color: #475569; padding: 4px 10px; border-radius: 4px; font-weight: 500;">{{pi.quantity}}</span>
                        </td>
                        <td style="text-align: right;">
                            <span style="color: #0f172a; font-weight: 600;">
                                ${{pi.unitPrice * pi.quantity | number:'1.2-2'}}
                            </span>
                        </td>
                    </tr>
                </tbody>
                <tfoot style="background: #f8fafc;">
                    <tr>
                        <td colspan="3" style="text-align: right; color: #475569; padding: 16px;">
                            <strong style="color: #1e293b;">Grand Total</strong>
                        </td>
                        <td style="text-align: right; padding: 16px;">
                            <span style="color: #059669; font-weight: 700; font-size: 1.5rem;">
                                ${{calculateTotal() | number:'1.2-2'}}
                            </span>
                        </td>
                    </tr>
                </tfoot>
            </table>
        </div>
    </div>
</div>